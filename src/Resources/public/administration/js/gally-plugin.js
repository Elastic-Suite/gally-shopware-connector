(function(){var t={12:function(){Shopware.Component.override("sw-system-config",{methods:{saveAll(){if("GallyPlugin.config"===this.domain)return this.isLoading=!0,this.systemConfigApiService.batchSave(this.actualConfigData).finally(()=>{let t=this.currentSalesChannelId;this.currentSalesChannelId=null,this.loadCurrentSalesChannelConfig().then(()=>{this.currentSalesChannelId=t,this.loadCurrentSalesChannelConfig().then(()=>{this.isLoading=!1})})});this.$super("saveAll")}}})}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.p="bundles/gallyplugin/",window?.__sw__?.assetPath&&(i.p=window.__sw__.assetPath+"/bundles/gallyplugin/"),function(){"use strict";Shopware.Component.register("gally-alert",{template:'<sw-alert :variant="variant">\n    {{ text }}\n</sw-alert>\n',props:{text:{type:String,required:!0,default:"button"},variant:{type:String,required:!1,default:"info"}}}),Shopware.Component.register("gally-button",{template:'<div class="sw-field">\n    <sw-button @click="runAction" :isLoading="isLoading">\n        {{ $tc(name) }}\n    </sw-button>\n</div>\n',inject:{gallyAction:"gally-action"},mixins:[Shopware.Mixin.getByName("notification")],props:{name:{type:String,required:!0,default:"button"},action:{type:String,required:!0,default:"test"}},data(){return{isLoading:!1}},methods:{runAction(){this.isLoading=!0,this.gallyAction[this.action]().then(t=>{200!==t.status||t.data.error?this.createNotificationError({message:t.data.message}):this.createNotificationSuccess({message:t.data.message}),this.isLoading=!1}).catch(t=>{this.createNotificationError({message:t.message}),this.isLoading=!1})}}}),i(12);class t{httpClient;loginService;constructor(t,e){this.httpClient=t,this.loginService=e}test(){return this.callApi("/gally/test",{baseUrl:document.getElementById("GallyPlugin.config.baseurl").value,user:document.getElementById("GallyPlugin.config.user").value,password:document.getElementById("GallyPlugin.config.password").value})}sync(){return this.callApi("/gally/synchronize")}index(){return this.callApi("/gally/index")}callApi(t,e={}){return this.httpClient.post(t,e,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${this.loginService.getToken()}`}})}}Shopware.Module.register("gally",{}),Shopware.Service().register("gally-action",e=>new t(Shopware.Application.getContainer("init").httpClient,e.loginService))}()})();